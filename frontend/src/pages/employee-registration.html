<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <script>
        function registerEmployee() {
            event.preventDefault()
            var employee = {} 
            employee['name'] = $('#register-employee-name').val()
            employee['cpf'] = $('#register-employee-cpf').val()

            var body = JSON.stringify(employee)
            $.ajax({
                url: "http://localhost:8080/employee",
                contentType: "application/json",
                data: body,
                dataType: "json",
                type: 'POST',
                success: function (response) {
                    $("#out-form").text('Colaborador cadastrado')
                },
                error:  function (response) {
                    if(response.responseText.includes('Resource already exists. cpf:'))
                        $("#out-form").text('Colaborador com este CPF j√° cadastrado')
                    else 
                        $("#out-form").text(response.responseText)
                },
            });
        }
    </script>

</head>
<body>
    <div class="container-fluid text-center" style="width: 50vw;">
        <p class="h1"> Cadastro de colaboradores </p>
        
        <form id="register-employee-form" onsubmit="registerEmployee(event)">
            <div class="form-group">
                <label for="name">Nome</label>
                <input type="text" class="form-control" id="register-employee-name" placeholder="Informe o nome" required>
            </div>
            <div class="form-group">
                <label for="cpf">Cpf</label>
                <input type="text" class="form-control" id="register-employee-cpf" placeholder="Informe o CPF" required>
            </div>
            <button id="register-employee" type="submit" class="btn btn-primary">Submit</button>
        </form>
        <p id="out-form" class="help-block"> </p>
    </div>
</body>
</html>